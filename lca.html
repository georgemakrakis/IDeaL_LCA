<!DOCTYPE>
<!Designed by Amin Mirkouei>
  <html class="ie ie7 no-js" lang="en-US">
  <html class="ie ie8 no-js" lang="en-US">
  <html class="no-js" lang="en-US">

  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IDEAL Research Group @ Uni. of Idaho</title>
    <!-- TODO: Fix the CSS -->
    <link rel="stylesheet" href="css/lca.css"> 
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/select/1.3.1/css/select.dataTables.min.css">
    <link href="twoColLiqLtHdr.css" rel="stylesheet" type="text/css" />
    <script>
      (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
          m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
      })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

      ga('create', 'UA-101336701-1', 'auto');
      ga('send', 'pageview');
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='/js/jquery-3.5.1.min.js' type='text/javascript'%3E%3C/script%3E"));
      }
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>
    <script>
      if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='/js/jquery.csv-0.71.min.js' type='text/javascript'%3E%3C/script%3E"));
      }
    </script>

    <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <script>
      if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='/js/jquery.dataTables.min.js' type='text/javascript'%3E%3C/script%3E"));
      }
    </script>

    <script src="https://cdn.datatables.net/select/1.3.1/js/dataTables.select.min.js"></script>
    <script>
      if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='/js/dataTables.select.min.js' type='text/javascript'%3E%3C/script%3E"));
      }
    </script>
    
    <script src="https://cdn.datatables.net/buttons/1.6.4/js/dataTables.buttons.min.js"></script>
    <script>
      if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='/js/dataTables.buttons.min.js' type='text/javascript'%3E%3C/script%3E"));
      }
    </script>
    
    <script src="https://editor.datatables.net/extensions/Editor/js/dataTables.editor.min.js"></script>
    <script>
      if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='/js/dataTables.editor.min.js' type='text/javascript'%3E%3C/script%3E"));
      }
    </script>

    <!-- The library for the pdf creation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.1.1/jspdf.umd.min.js" type="module"></script>
    <!-- <script>
      if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='/js/jspdf.umd.min.js' type='text/javascript'%3E%3C/script%3E"));
      }
    </script> -->

    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
      if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='/js/html2canvas.min.js' type='text/javascript'%3E%3C/script%3E"));
      }
    </script>

    <script src="js/html2csv.js" type="text/javascript"></script>

    <!-- Move the logic at the end of this file to lca.js -->
    <script src="js/lca.js" type="text/javascript"></script>

  </head>

  <body>
    <div class="container">
      <div class="header">
        <div>
          <div style="height: 35px; background-color: #FFC300  ; border-bottom: #000000; margin-bottom: 10px;">
          </div>
          <h2 class="text">
            <a href="https://www.uidaho.edu/idaho-falls">
              <img src="UI.JPG" class="panel" style="width: 271px; height: 90px; float: left;" /></a></h2>
          <h2 class="panel" align="center">Innovative Design and Manufacturing Laboratory<img src="ideal.JPG"
              class="panel" style="width: 271px; height: 90px; float:right;" /></a></h2>
          <h2 class="panel" align="center">PI: Dr. Amin Mirkouei</a></h2>
        </div>
        <div style="height: 17px; background-color: #808080; border-bottom: #b39700; margin-bottom: 30px;">
        </div>
        <!-- end .header -->
      </div>

      <div class="sidebar1">
        <nav class="menu">
          <p><a href="index.html">Home</a></p>
          <p><a href="lca.html">LCA</a></p>
          <p><a href="economic.html">Economic Assessment</a></p>
          <p><a href="environmental.html">Envorinmental Assessment</a></p>
          <p><a href="social.html">Social Assessment</a></p>
        </nav>
        <!-- end .sidebar1 -->
      </div>

      <div class="content" style="width: 70%">
        <!-- LCA -->
        <article id="Life Cycle Assessment" class="panel">
          <header>
            <h2>Life Cycle Assessment (LCA) v0.01</h2>

            <p align="justify" class="panel">An open-source software for LCA and sustainability assessment.</p>
            <p>&nbsp;</p>
            <h3>Getting started:</h3>
            <li style="font-size:12pt"> Manuals, case studies, and databases are available <b><a
                  href="manual.html">here.</b></a></li>

            <p>&nbsp;</p>
            <h3>-----------------------------------</h3>
            <h3 id="infoHeader">Name of the project, Name and Email:</h3>

            <table>
              <tr>
                <td><input id="projectName" type="text" name="projectName" placeholder="Name of the project" /></td>
              </tr>
              <tr>
                <td><input id="name" type="text" name="name" placeholder="Name" /></td>
                <td><input id="email" type="email" name="email" placeholder="Email" /></td>
              </tr>
            </table>


            <p>&nbsp;</p>
            <h3>-----------------------------------</h3>
            <h3 id="scopeHeader">Phase 1. Goal and scope definition:</h3>
            <li style="font-size:12pt"> <b>Define your goal, scope, system boundary, functional unit, and case study
                assumptions down here:</b></li>

            <textarea id="phase1Text" name="phase1Text" rows="4" cols="50">

            </textarea>

            <!-- <li style="font-size:12pt"> <b>Example:</b> LCA performed herein evaluates GWP for the manure to valueadded
              products life cycle. GHG emission factors are used to calculate the
              GWP (in kg CO2 equivalent) with the key factors being 28 kg CO2 eq./kg
              CH4 and 265 kg CO2 eq./kg N2O, which are acquired from the Intergovernmental
              Panel on Climate Change for a 100-year time horizon. The <b>scope</b> of this study includes four distinct
              stages that can be
              categorized into two processes: (i) upstream processes, including raw material (cattle manure) collection,
              and (ii) midstream processes,
              involving on-site pretreatment (dewatering and size reduction), on-site converting manure to intermediate
              products (biochar, bio-oil, and pyrolysis
              gas), on-site reusing intermediate products (e.g., bio-oil and pyrolysis gas) for pretreatment purposes
              (i.e., heat and electricity), and
              biochar distribution. This <b>scope considers a cradle-to-gate system boundary</b>. The <b>functional
                unit</b> in this study is one kilogram of
              biochar, using the identified scope.</li> -->

            <h3>-----------------------------------</h3>
            <h3 id="phase2Header">Phase 2. Life cycle inventory (LCI):</h3>
            <!-- <li style="font-size:12pt"> Creating a database</li> -->

            <input type="radio" id="createDatabase" name="databaseMethod" value="createDatabase">
            <label for="createDatabase"><i>Creating a database</i></label>

            <div id="customTables">
              <div id="customTableDivLifeExpectancy" style="display: none;">
                <table id="customTableLifeExpectancy" style="table-layout:fixed; width: 100%;">
                  <thead>
                    <tr>
                      <th>Indicator</th>
                      <th>Metric</th>
                      <th>Location</th>
                      <th>Score</th>
                      <th>Total Score</th>
                    </tr>
                    <thead>
                    <tbody>
                      <tr>
                        <td>
                          <input id="indicator" type="text" name="indicator" placeholder="Indicator" class="indicator"/>
                        </td>
                        <td><input id="metric" type="text" name="metric" placeholder="Metric" class="metric"/></td>
                        <td><input id="location" type="text" name="location" placeholder="Location" class="location" /></td>
                        <td><input id="score" type="text" name="score" placeholder="score" class="score" /></td>
                        <td><input id="totalScore" type="text" name="totalScore" placeholder="Total Score" class="totalScore" /></td> 
                      </tr>
                    </tbody>
                </table>
                <input id="addButtonLifeExpectancy" type="button" value="Add new record" class="addButton"/>
                <input id="addNewProcessButton1LifeExpectancy" type="button" value="Add new process" class="addNewProcessButton1"/>
                <label id="processCountLifeExpectancy"> Processes: 0/2 </label>
                <label id="customTableErrorMessage" value="" style="color:red"></label>
                <br>
                <input id="exportDatabaseLifeExpectancy" value="Export as CSV" type="button" style="display: none;">

              </div>
              <p>&nbsp;</p>
            </div>


            <div id="customTableDivHealth" style="display: none;">
              <table id="customTableHealth" style="table-layout:fixed; width: 100%;">
                <thead>
                  <tr>
                    <th>Indicator</th>
                    <th>Metric</th>
                    <th>Location</th>
                    <th>Score</th>
                    <th>Total Score</th>
                  </tr>
                  <thead>
                  <tbody>
                    <tr>
                      <td>
                        <input id="indicator" type="text" name="indicator" placeholder="Indicator" class="indicator"/>
                      </td>
                      <td><input id="metric" type="text" name="metric" placeholder="Metric" class="metric"/></td>
                      <td><input id="location" type="text" name="location" placeholder="Location" class="location" /></td>
                      <td><input id="score" type="text" name="score" placeholder="score" class="score" /></td>
                      <td><input id="totalScore" type="text" name="totalScore" placeholder="Total Score" class="totalScore" /></td> 
                    </tr>
                  </tbody>
              </table>
              <input id="addButtonHealth" type="button" value="Add new record" class="addButton" />
              <input id="addNewProcessButton1Health" type="button" value="Add new process" class="addNewProcessButton1"/>
              <label id="processCountHealth"> Processes: 0/2 </label>
              <label id="customTableErrorMessage" value="" style="color:red"></label>
              <br>
              <input id="exportDatabaseHealth" value="Export as CSV" type="button" style="display: none;">

            </div>
            <p>&nbsp;</p>

            <div id="customTableDivEducation" style="display: none;">
              <table id="customTableEducation" style="table-layout:fixed; width: 100%;">
                <thead>
                  <tr>
                    <th>Indicator</th>
                    <th>Metric</th>
                    <th>Location</th>
                    <th>Score</th>
                    <th>Total Score</th>                    
                  </tr>
                  <thead>
                  <tbody>
                    <tr>
                      <td>
                        <input id="indicator" type="text" name="indicator" placeholder="Indicator" class="indicator"/>
                      </td>
                      <td><input id="metric" type="text" name="metric" placeholder="Metric" class="metric"/></td>
                      <td><input id="location" type="text" name="location" placeholder="Location" class="location" /></td>
                      <td><input id="score" type="text" name="score" placeholder="score" class="score" /></td>
                      <td><input id="totalScore" type="text" name="totalScore" placeholder="Total Score" class="totalScore" /></td>                      
                    </tr>
                  </tbody>
              </table>
              <input id="addButtonEducation" type="button" value="Add new record" class="addButton"/>
              <input id="addNewProcessButton1Education" type="button" value="Add new process" class="addNewProcessButton1"/>
              <label id="processCountEducation"> Processes: 0/2 </label>
              <label id="customTableErrorMessage" value="" style="color:red"></label>
              <br>
              <input id="exportDatabaseEducation" value="Export as CSV" type="button" style="display: none;">

            </div>
            <p>&nbsp;</p>

            <div id="customTableDivSafety" style="display: none;">
              <table id="customTableSafety" style="table-layout:fixed; width: 100%;">
                <thead>
                  <tr>
                    <th>Indicator</th>
                    <th>Metric</th>
                    <th>Location</th>
                    <th>Score</th>
                    <th>Total Score</th>
                  </tr>
                  <thead>
                  <tbody>
                    <tr>
                      <td>
                        <input id="indicator" type="text" name="indicator" placeholder="Indicator" class="indicator"/>
                      </td>
                      <td><input id="metric" type="text" name="metric" placeholder="Metric" class="metric"/></td>
                      <td><input id="location" type="text" name="location" placeholder="Location" class="location" /></td>
                      <td><input id="score" type="text" name="score" placeholder="score" class="score" /></td>
                      <td><input id="totalScore" type="text" name="totalScore" placeholder="Total Score" class="totalScore" /></td> 
                    </tr>
                  </tbody>
              </table>
              <input id="addButtonSafety" type="button" value="Add new record" class="addButton"/>
              <input id="addNewProcessButton1Safety" type="button" value="Add new process" class="addNewProcessButton1"/>
              <label id="processCountSafety"> Processes: 0/2 </label>
              <label id="customTableErrorMessage" value="" style="color:red"></label>
              <br>
              <input id="exportDatabaseSafety" value="Export as CSV" type="button" style="display: none;">

            </div>

            <!-- <input id="addNewTableButton" type="button" value="Add new table" class="addNewTableButton"/> -->
            <p>&nbsp;</p>

            <!-- <li style="font-size:12pt"> Importing a database</li> -->
            <input type="radio" id="importDatabase" name="databaseMethod" value="importDatabase">
            <label for="importDatabase"><i>Importing a database</i></label>

            <div id="readyTableDivLifeExpectancy" class="container mt-4 a" style="display: none;">
              <!-- <canvas id="canvasLifeExpectancy"> -->
                <div id="dvImportSegmentsLifeExpectancy" class="fileupload ">
                  <fieldset>
                    <legend>Upload your CSV File for Life Expectancy</legend>
                    <input type="file" name="File Upload" id="txtFileUploadLifeExpectancy" accept=".csv" />
                  </fieldset>
                  <div id="csv-displayLifeExpectancy">
                    <table id="CSVtableLifeExpectancy" class="display"></table>
                  </div>
                  <input id="addNewProcessButton2LifeExpectancy" type="button" value="Add new process" class="addNewProcessButton2" />
                  <label id="processCount2LifeExpectancy"> Processes: 0/2 </label>
                  <label id="csvTableErrorMessage" value="" style="color:red"></label>
                </div>
              <!-- </canvas> -->
            </div>

            <div id="readyTableDivHealth" class="container mt-4 a" style="display: none;">
              <div id="dvImportSegmentsHealth" class="fileupload ">
                <fieldset>
                  <legend>Upload your CSV File for Health</legend>
                  <input type="file" name="File Upload" id="txtFileUploadHealth" accept=".csv" />
                </fieldset>
                <div id="csv-displayHealth">
                  <table id="CSVtableHealth" class="display"></table>
                </div>
                <input id="addNewProcessButton2Health" type="button" value="Add new process" class="addNewProcessButton2" />
                <label id="processCount2Health"> Processes: 0/2 </label>
                <label id="csvTableErrorMessageHealth" value="" style="color:red"></label>
              </div>
            </div>

            <div id="readyTableDivEducation" class="container mt-4 a" style="display: none;">
              <div id="dvImportSegmentsEducation" class="fileupload ">
                <fieldset>
                  <legend>Upload your CSV File for Education</legend>
                  <input type="file" name="File Upload" id="txtFileUploadEducation" accept=".csv" />
                </fieldset>
                <div id="csv-displayEducation">
                  <table id="CSVtableEducation" class="display"></table>
                </div>
                <input id="addNewProcessButton2Education" type="button" value="Add new process"  class="addNewProcessButton2"/>
                <label id="processCount2Education"> Processes: 0/2 </label>
                <label id="csvTableErrorMessageEducation" value="" style="color:red"></label>
              </div>
            </div>

            <div id="readyTableDivSafety" class="container mt-4 a" style="display: none;">
              <div id="dvImportSegmentsSafety" class="fileupload ">
                <fieldset>
                  <legend>Upload your CSV File for Safety</legend>
                  <input type="file" name="File Upload" id="txtFileUploadSafety" accept=".csv" />
                </fieldset>
                <div id="csv-displaySafety">
                  <table id="CSVtableSafety" class="display"></table>
                </div>
                <input id="addNewProcessButton2Safety" type="button" value="Add new process" class="addNewProcessButton2" />
                <label id="processCount2Safety"> Processes: 0/2 </label>
                <label id="csvTableErrorMessageSafety" value="" style="color:red"></label>
              </div>
            </div>

            <p>&nbsp;</p>
            
            <!-- <input type="radio" id="exportDatabase" name="databaseMethod" value="exportDatabase">
            <label for="exportDatabase"><i>Exporting a database</i></label> -->
  

            <h3>-----------------------------------</h3>
            <h3 id="methodHeader">Phase 3. Life cycle impact assessment (LCIA):</h3>
            <li style="font-size:12pt"> Method selection</li>
            <!-- The same name allows the one of the two radio buttons to be selected -->
            <input type="radio" id="socialMethod" name="method" value="socialMethod">
            <label for="socialMethod"><i>Social analysis method: Indicator Value = </i> <br>
              <img id="indicator_image" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4RD0RXhpZgAATU0AKgAAAAgABAE7AAIAAAAOAAAISodpAAQAAAABAAAIWJydAAEAAAAcAAAQ0OocAAcAAAgMAAAAPgAAAAAc6gAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEFtaW4gTWlya291ZWkAAAWQAwACAAAAFAAAEKaQBAACAAAAFAAAELqSkQACAAAAAzY3AACSkgACAAAAAzY3AADqHAAHAAAIDAAACJoAAAAAHOoAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAyMDIwOjEyOjA5IDExOjEwOjQzADIwMjA6MTI6MDkgMTE6MTA6NDMAAABBAG0AaQBuACAATQBpAHIAawBvAHUAZQBpAAAA/+ELIGh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8APD94cGFja2V0IGJlZ2luPSfvu78nIGlkPSdXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQnPz4NCjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iPjxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+PHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9InV1aWQ6ZmFmNWJkZDUtYmEzZC0xMWRhLWFkMzEtZDMzZDc1MTgyZjFiIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iLz48cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0idXVpZDpmYWY1YmRkNS1iYTNkLTExZGEtYWQzMS1kMzNkNzUxODJmMWIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+PHhtcDpDcmVhdGVEYXRlPjIwMjAtMTItMDlUMTE6MTA6NDMuNjczPC94bXA6Q3JlYXRlRGF0ZT48L3JkZjpEZXNjcmlwdGlvbj48cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0idXVpZDpmYWY1YmRkNS1iYTNkLTExZGEtYWQzMS1kMzNkNzUxODJmMWIiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+PGRjOmNyZWF0b3I+PHJkZjpTZXEgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj48cmRmOmxpPkFtaW4gTWlya291ZWk8L3JkZjpsaT48L3JkZjpTZXE+DQoJCQk8L2RjOmNyZWF0b3I+PC9yZGY6RGVzY3JpcHRpb24+PC9yZGY6UkRGPjwveDp4bXBtZXRhPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNr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">
              <canvas id="indicator_image_canvas"></canvas>
            </label><br>
            <p>&nbsp;</p>

            <input type="radio" id="method4" name="method" value="method4">
            <label for="method4"><i>Method developed by user (comming soon)</i></label><br>

            <h3>-----------------------------------</h3>

            <p>&nbsp;</p>
            <li style="font-size:12pt">Results</li>
            <p id='Result1'>Case Study Result : </p>
            <p id='Result2'>Proposed Study Result : </p>

            <p>&nbsp;</p>

            <h3>-----------------------------------</h3>
            <h3 id="phase4Header">Phase 4: Interpretation:</h3>
            <li style="font-size:12pt"> Analyzing the results and comparison</li>

            <canvas id="myChart" style="height: 370px; width: 100%;"></canvas>
            <p>&nbsp;</p>
            <li style="font-size:12pt"> Generating a PDF report <button type="reportButton"
                id="generateReport">Generate</button></li>
            <p>&nbsp;</p>

            </ul>
            <p>&nbsp;</p>

            <p>
              <small>
                Contributors:        
                <ol>
                  <li> <b>Amin Mirkouei</b> initially came up with this idea for his sustainability class. He is contributing to the structure (phases), mathematical modeling, and web development.</li>
                  <li> <b>Justin Walters</b> has contributed to the method development for social LCA.</li>
                  <li> <b>George Makrakis</b> is contributing to the web development.</li>
                </ol>
              </small>
            </p>

            
            <!-- end .content -->
      </div>
      <div class="footer">
        </i></a></span></div>
      <p> &copy; 2018 IDeaL . <a href="http://www.uidaho.edu/" align="center" title="IDeaL Research Group"
          rel="bookmark" ; float: center">University of Idaho</a></p>
    </div>
    </div>



    <p>&nbsp;</p>
    <!-- end .footer -->
    </div>
    <!-- end .container -->
    </div>
  </body>

  <script type="text/javascript">

    $(document).ready(function () {

      //$('#customTable').DataTable();

      var tableLifeExpectancy = null;
      var tableHealth = null;
      var tableEducation = null;
      var tableSafety = null;
      var selectedMethodId = null;

      var customTableLifeExpectancy = $('#customTableLifeExpectancy').dataTable();
      var customTableEducation = $('#customTableEducation').dataTable();
      var customTableHealth = $('#customTableHealth').dataTable();
      var customTableSafety = $('#customTableSafety').dataTable();

      var ctx = document.getElementById('myChart').getContext('2d');
      var chart = initializeChart(ctx);

      var resultsLifeExpectancy = {
        result1 : 0,
        result2 : 0,
        error : null
      };
      var resultsEducation = {
        result1 : 0,
        result2 : 0,
        error : null
      };
      var resultsHealth = {
        result1 : 0,
        result2 : 0,
        error : null
      };
      var resultsSafety = {
        result1 : 0,
        result2 : 0,
        error : null
      };

      $('input:radio[name="databaseMethod"]').click(
        function () {
          if (this.value == 'createDatabase') {
            $("#customTableDivLifeExpectancy").css("display", "block");
            $("#customTableDivHealth").css("display", "block");
            $("#customTableDivEducation").css("display", "block");
            $("#customTableDivSafety").css("display", "block");

            $("#readyTableDivLifeExpectancy").css("display", "none");
            $("#readyTableDivHealth").css("display", "none");
            $("#readyTableDivEducation").css("display", "none");
            $("#readyTableDivSafety").css("display", "none");

            resultsLifeExpectancy.result1 = 0;
            resultsLifeExpectancy.result2 = 0;
            resultsLifeExpectancy.error = null;

            resultsEducation.result1 = 0;
            resultsEducation.result2 = 0;
            resultsEducation.error = null;

            resultsHealth .result1 = 0;
            resultsHealth.result2 = 0;
            resultsHealth.error = null;

            resultsSafety.result1 = 0;
            resultsSafety.result2 = 0;
            resultsSafety.error = null;

          }
          if (this.value == 'importDatabase') {
            $("#readyTableDivLifeExpectancy").css("display", "block");
            $("#readyTableDivHealth").css("display", "block");
            $("#readyTableDivEducation").css("display", "block");
            $("#readyTableDivSafety").css("display", "block");
            
            $("#customTableDivLifeExpectancy").css("display", "none");
            $("#customTableDivHealth").css("display", "none");
            $("#customTableDivEducation").css("display", "none");            
            $("#customTableDivSafety").css("display", "none");

            resultsLifeExpectancy.result1 = 0;
            resultsLifeExpectancy.result2 = 0;
            resultsLifeExpectancy.error = null;

            resultsEducation.result1 = 0;
            resultsEducation.result2 = 0;
            resultsEducation.error = null;

            resultsHealth .result1 = 0;
            resultsHealth.result2 = 0;
            resultsHealth.error = null;

            resultsSafety.result1 = 0;
            resultsSafety.result2 = 0;
            resultsSafety.error = null;            
          }
        }
      );

      $('input:radio[name="method"]').click(
        function () {
          if (this.value == 'socialMethod') {

            var indicator1 = $('#customTableDivLifeExpectancy .indicator')[0].value;
            var indicator2 = $('#customTableDivHealth .indicator')[0].value;
            var indicator3 = $('#customTableDivEducation .indicator')[0].value;
            var indicator4 = $('#customTableDivSafety .indicator')[0].value;

            $('#Result1').replaceWith("<p id='Result1'>Case Study Result: <br>"+ indicator1+": <i> "+ resultsLifeExpectancy.result1 + "</i>"+
              "<br> "+indicator2+": <i>" + resultsEducation.result1 + "</i> <br> "+indicator3+": <i>" + resultsHealth.result1 + "</i>"+
              "<br> "+indicator4+": <i>" + resultsSafety.result1 + "</i></p>");

            $('#Result2').replaceWith("<p id='Result2'>Proposed Study Result:<br>"+ indicator1+": <i> "+ resultsLifeExpectancy.result2 + "</i>"+
              "<br> "+indicator2+": <i>" + resultsEducation.result2 + "</i> <br> "+indicator3+": <i>" + resultsHealth.result2 + "</i>"+
              "<br> "+indicator4+": <i>" + resultsSafety.result2 + "</i></p>");
            
            // updateChart(chart, label, results.result1, results.result2);            
            updateChart(chart, [indicator1, indicator2, indicator3, indicator4], resultsLifeExpectancy, resultsEducation, resultsHealth, resultsSafety);                       
          }
         
        }
      );

      // $(".addNewTableButton").click(
      //   function () {    
      //     addTable();
      //   }
      // );

      // Here once the user select the appropraite checkbox, we perform the corresponding calculation
      $(".addNewProcessButton2").click(
        function () {

          selectedMethodId = $(this).attr("id");

          $("#csvTableErrorMessage").text("");

          if ($(this).attr("id") === 'addNewProcessButton2LifeExpectancy' && tableLifeExpectancy != null) {                    
            if (resultsLifeExpectancy.result1 != 0 && resultsLifeExpectancy.result2 == 0) {
              resultsLifeExpectancy.result2 =  createResultsFromCSVTable(tableLifeExpectancy);
              $("#processCount2LifeExpectancy").replaceWith("<label id='processCount2LifeExpectancy'> Processes: 2/2 </label>");
            }
            if (resultsLifeExpectancy.result1 == 0 && resultsLifeExpectancy.result2 == 0) {
              resultsLifeExpectancy.result1 =  createResultsFromCSVTable(tableLifeExpectancy);
              $("#processCount2LifeExpectancy").replaceWith("<label id='processCount2LifeExpectancy'> Processes: 1/2 </label>");
            }
            if (resultsLifeExpectancy.result2.error === "One or more values in w_i is not a number" 
                || resultsLifeExpectancy.result1.error === "One or more values in w_i is not a number") {
              $("#csvTableErrorMessage").text("One or more values in w_i is not a number");
            }                       
          }

          if ($(this).attr("id") === 'addNewProcessButton2Health' && tableHealth != null) {
            
            if (resultsHealth.result1 != 0 && resultsHealth.result2 == 0) {
              resultsHealth.result2 =  createResultsFromCSVTable(tableHealth);
              $("#processCount2Health").replaceWith("<label id='processCount2Health'> Processes: 2/2 </label>");
            }
            if (resultsHealth.result1 == 0 && resultsHealth.result2 == 0) {
              resultsHealth.result1 =  createResultsFromCSVTable(tableHealth);
              $("#processCount2Health").replaceWith("<label id='processCount2Health'> Processes: 1/2 </label>");
            }
            if (resultsHealth.result2.error === "One or more values in w_i is not a number" 
                || resultsHealth.result1.error === "One or more values in w_i is not a number") {
              $("#csvTableErrorMessage").text("One or more values in w_i is not a number");
            }                       
          }
          
          if ($(this).attr("id") === 'addNewProcessButton2Education' && tableEducation != null) {
            
            if (resultsEducation.result1 != 0 && resultsEducation.result2 == 0) {
              resultsEducation.result2 =  createResultsFromCSVTable(tableEducation);
              $("#processCount2Education").replaceWith("<label id='processCount2Education'> Processes: 2/2 </label>");
            }
            if (resultsEducation.result1 == 0 && resultsEducation.result2 == 0) {
              resultsEducation.result1 =  createResultsFromCSVTable(tableEducation);
              $("#processCount2Education").replaceWith("<label id='processCount2Education'> Processes: 1/2 </label>");
            }
            if (resultsEducation.result2.error === "One or more values in w_i is not a number" 
                || resultsEducation.result1.error === "One or more values in w_i is not a number") {
              $("#csvTableErrorMessage").text("One or more values in w_i is not a number");
            }                       
          }


          if ($(this).attr("id") === 'addNewProcessButton2Safety' && tableSafety != null) {
            
            if (resultsSafety.result1 != 0 && resultsSafety.result2 == 0) {
              resultsSafety.result2 =  createResultsFromCSVTable(tableSafety);
              $("#processCount2Safety").replaceWith("<label id='processCount2Safety'> Processes: 2/2 </label>");
            }
            if (resultsSafety.result1 == 0 && resultsSafety.result2 == 0) {
              resultsSafety.result1 =  createResultsFromCSVTable(tableSafety);
              $("#processCount2Safety").replaceWith("<label id='processCount2Safety'> Processes: 1/2 </label>");
            }
            if (resultsSafety.result2.error === "One or more values in w_i is not a number" 
                || resultsSafety.result1.error === "One or more values in w_i is not a number") {
              $("#csvTableErrorMessage").text("One or more values in w_i is not a number");
            }                       
          }       

          // Add the rest of the methods here (probably seperate functions)
        }
      );

      $(".addNewProcessButton1").click(

        // This function should be for the manually populated table
        function () {
          if ($(this).attr("id") === 'addNewProcessButton1LifeExpectancy' && customTableLifeExpectancy != null) {
            var metric_elements =$('#customTableLifeExpectancy tbody .metric');
            var location_elements =$('#customTableLifeExpectancy tbody .location');
            var score_elements = $('#customTableLifeExpectancy tbody .score');
            var totalScore_elements = $('#customTableLifeExpectancy tbody .totalScore');     
            
            var indicator = $('#customTableDivLifeExpectancy .indicator')[0].value;            

            if (resultsLifeExpectancy.result1 != 0 && resultsLifeExpectancy.result2 == 0) {
              resultsLifeExpectancy.result2 =  getResults(location_elements, metric_elements, score_elements, totalScore_elements);
              $("#processCountLifeExpectancy").replaceWith("<label id='processCountLifeExpectancy'> Processes: 2/2 </label>");

              // We add the second as parameter to the button click event. We also display the button
              $("#exportDatabaseLifeExpectancy").click(function(){exportTableToCSV(indicator, indicator+'_Process2.csv', 2)});
              $("#exportDatabaseLifeExpectancy").css("display", "block");
            }
            if (resultsLifeExpectancy.result1 == 0 && resultsLifeExpectancy.result2 == 0) {
              resultsLifeExpectancy.result1 =  getResults(location_elements, metric_elements, score_elements, totalScore_elements);
              $("#processCountLifeExpectancy").replaceWith("<label id='processCountLifeExpectancy'> Processes: 1/2 </label>");
              
              // We add the first process to the memory that will be exported later
              exportTableToCSV(indicator, indicator+'_Process1.csv', 1);
            }            
            
          }

          if ($(this).attr("id") === 'addNewProcessButton1Health' && customTableHealth != null) {
            var metric_elements =$('#customTableHealth tbody .metric');
            var location_elements =$('#customTableHealth tbody .location');
            var score_elements = $('#customTableHealth tbody .score');
            var totalScore_elements = $('#customTableHealth tbody .totalScore');

            var indicator = $('#customTableDivHealth .indicator')[0].value;           

            if (resultsHealth.result1 != 0 && resultsHealth.result2 == 0) {
              resultsHealth.result2 =  getResults(location_elements, metric_elements, score_elements, totalScore_elements);
              $("#processCountHealth").replaceWith("<label id='processCountHealth'> Processes: 2/2 </label>");

              // We add the second as parameter to the button click event. We also display the button
              $("#exportDatabaseHealth").click(function(){exportTableToCSV(indicator, indicator+'_Process2.csv', 2)});
              $("#exportDatabaseHealth").css("display", "block");
            }
            if (resultsHealth.result1 == 0 && resultsHealth.result2 == 0) {
              resultsHealth.result1 =  getResults(location_elements, metric_elements, score_elements, totalScore_elements);
              $("#processCountHealth").replaceWith("<label id='processCountHealth'> Processes: 1/2 </label>");
              
              // We add the first process to the memory that will be exported later
              exportTableToCSV(indicator, indicator+'_Process1.csv', 1);
            }
            
          }

          if ($(this).attr("id") === 'addNewProcessButton1Education' && customTableEducation != null) {
            var metric_elements =$('#customTableEducation tbody .metric');
            var location_elements =$('#customTableEducation tbody .location');
            //var w_i_elements =$('#customTableEducation tbody .w_i');
            var score_elements = $('#customTableEducation tbody .score');
            var totalScore_elements = $('#customTableEducation tbody .totalScore');

            var indicator = $('#customTableDivEducation .indicator')[0].value;            

            if (resultsEducation.result1 != 0 && resultsEducation.result2 == 0) {
              resultsEducation.result2 =  getResults(location_elements, metric_elements, score_elements, totalScore_elements);
              $("#processCountEducation").replaceWith("<label id='processCountEducation'> Processes: 2/2 </label>");

              // We add the second as parameter to the button click event. We also display the button
              $("#exportDatabaseEdcuation").click(function(){exportTableToCSV(indicator, indicator+'_Process2.csv', 2)});
              $("#exportDatabaseEducation").css("display", "block");
            }
            if (resultsEducation.result1 == 0 && resultsEducation.result2 == 0) {
              resultsEducation.result1 =  getResults(location_elements, metric_elements, score_elements, totalScore_elements);
              $("#processCountEducation").replaceWith("<label id='processCountEducation'> Processes: 1/2 </label>");

               // We add the first process to the memory that will be exported later
               exportTableToCSV(indicator, indicator+'_Process1.csv', 1);
            }

          }

          if ($(this).attr("id") === 'addNewProcessButton1Safety' && customTableSafety != null) {
            var metric_elements =$('#customTableSafety tbody .metric');
            var location_elements =$('#customTableSafety tbody .location');
            var score_elements = $('#customTableSafety tbody .score');
            var totalScore_elements = $('#customTableSafety tbody .totalScore');

            var indicator = $('#customTableDivSafety .indicator')[0].value;

            if (resultsSafety.result1 != 0 && resultsSafety.result2 == 0) {
              resultsSafety.result2 = getResults(location_elements, metric_elements, score_elements, totalScore_elements);
              $("#processCountSafety").replaceWith("<label id='processCountSafety'> Processes: 2/2 </label>");

              // We add the second as parameter to the button click event. We also display the button
              $("#exportDatabaseSafety").click(function(){exportTableToCSV(indicator, indicator+'_Process2.csv', 2)});
              $("#exportDatabaseSafety").css("display", "block");
            }
            if (resultsSafety.result1 == 0 && resultsSafety.result2 == 0) {
              resultsSafety.result1 =  getResults(location_elements, metric_elements, score_elements, totalScore_elements);
              $("#processCountSafety").replaceWith("<label id='processCountSafety'> Processes: 1/2 </label>");

              // We add the first process to the memory that will be exported later
              exportTableToCSV(indicator, indicator+'_Process1.csv', 1);
            }
            
          }

            
      });

      function getResults(location_elements, metric_elements, score_elements, totalScore_elements){
          $("#customTableErrorMessage").text("");

            // if($("input[name='indicator']").length == 1 && ($("#indicator").val() !== 'lifeExpectancy')){
            //   $("#customTableErrorMessage").text("Incorrect indicator option selected");
            //   return;
            // }

            selectedMethodId = "Social Analysis Method";

            // if ($("input[name='indicator']").length > 1) {
            //   $("#customTableErrorMessage").text("More than one indicators included");
            //   return;
            // }

            // var w_i = 1;
            // var w_i_ok = true;

            // // We traverse all rows to perform the required multiplication
            // w_i_elements.each(function () {
            //   if ($.isNumeric($(this).val())) {
            //     w_i *= ($(this).val());
            //   }
            //   else {
            //     $("#customTableErrorMessage").text("One or more values in w_i is not a number");
            //     w_i_ok = false; // even if we find one string in the w_i's we put zero to that value
            //     return false;
            //   }
            // });

            // // If we have noticed a string we return
            // if (!w_i_ok) {
            //   return;
            // }

            var metrics = 0;
            metric_elements.each(function () {
              metrics++;
            });

            var location = [];
            location_elements.each(function () {
              location.push($(this).val());
            });
            
            var score = [];
            score_elements.each(function () {              
              score.push($(this).val());
            });

            var totalScore = [];
            totalScore_elements.each(function () {
              totalScore.push($(this).val());
            });

            return createResultsFromCustomTable(metrics, location, score, totalScore);          
      }

      // The event listener for the file uploads
      document.getElementById('txtFileUploadLifeExpectancy').addEventListener('change', upload, false);    
      document.getElementById('txtFileUploadHealth').addEventListener('change', upload, false);
      document.getElementById('txtFileUploadEducation').addEventListener('change', upload, false);
      document.getElementById('txtFileUploadSafety').addEventListener('change', upload, false);

      // TODO: Add the rest of the events here, pass the ID of the csv somehow (see this.id) and then convert the addNewProcessButton2
      // to have the appropriate button ID and to call the same fucntion based on the if statements

      // Method that checks that the browser supports the HTML5 File API
      function browserSupportFileUpload() {
        var isCompatible = false;
        if (window.File && window.FileReader && window.FileList && window.Blob) {
          isCompatible = true;
        }
        return isCompatible;
      }

      $(".addButton").click(function () {

        //var str ="<tr><td></td><td><input id='email' type='email' name='email' placeholder='Email'/></td><td><input id='email' type='email' name='email' placeholder='Email' /></td><td><input id='email' type='email' name='email' placeholder='Email' /></td><td><input id='email' type='email' name='email' placeholder='Email' /></td><td><input id='email' type='email' name='email' placeholder='Email' /></td><td><input id='email' type='email' name='email' placeholder='Email' /></td></tr>'";

        // $('#customTable tbody').append(str);

        if($(this).attr('id') === 'addButtonLifeExpectancy'){
            addRows(customTableLifeExpectancy);
        }
        
        if($(this).attr('id') === 'addButtonEducation'){
            addRows(customTableEducation);
        } 

        if($(this).attr('id') === 'addButtonHealth'){
            addRows(customTableHealth);
        } 

        if($(this).attr('id') === 'addButtonSafety'){
            addRows(customTableSafety);
        } 
      });

      function addRows(customTable){
        customTable.dataTable().fnAddData([
          "",
          "<input id='metric' type='text' name='metric' placeholder='Metric' class='metric' />",
          "<input id='location' type='text' name='location' placeholder='Location' class='location' />",
          "<input id='score' type='text' name='score' placeholder='Score' class='score' />",
          "<input id='totalScore' type='text' name='totalScore' placeholder='Total Score' class='totalScore' />"
        ]);
      }

      function addTable(){
        var newTable =  document.createElement('div');

          newTable.innerHTML =
          '<div id="customTableDivLifeExpectancy2" style="display: block;">'+
          '<table id="customTableLifeExpectancy2" style="table-layout:fixed; width: 100%;">'+
                  '<thead>'+
                    '<tr>'+
                      '<th>Indicator</th>'+
                      '<th>Metric</th>'+
                      '<th>Location</th>'+
                      '<th>Score</th>'+
                      '<th>Total Score</th>'+
                    '</tr>'+
                    '<thead>'+
                    '<tbody>'+
                      '<tr>'+
                        '<td>'+
                        ' Life Expectancy 2'+
                        '</td>'+
                        '<td><input id="metric" type="text" name="metric" placeholder="Metric" class="metric"/></td>'+
                        '<td><input id="location" type="text" name="location" placeholder="Location" class="location" /></td>'+
                        '<td><input id="score" type="text" name="score" placeholder="score" class="score" /></td>'+
                        '<td><input id="totalScore" type="text" name="totalScore" placeholder="Total Score" class="totalScore" /></td> '+
                      '</tr>'+
                    '</tbody>'+
                '</table>'+
                '<input id="addButtonLifeExpectancy" type="button" value="Add new record" class="addButton"/>'+
                '<input id="addNewProcessButton1LifeExpectancy" type="button" value="Add new process" class="addNewProcessButton1"/>'+
                '<label id="processCountLifeExpectancy"> Processes: 0/2 </label>'+
                '<label id="customTableErrorMessage" value="" style="color:red"></label>'+
                '<br>'+
                '<input id="exportDatabaseLifeExpectancy" value="Export as CSV" type="button" style="display: none;">'+

              '</div>';
        document.getElementById("customTables").appendChild(newTable);
      }


      // Method that reads and processes the selected file
      function upload(evt) {        
        if (!browserSupportFileUpload()) {
          alert('The File APIs are not fully supported in this browser!');
        }
        else {          
          var data = null;
          var file = evt.target.files[0];
          var reader = new FileReader();
          reader.readAsText(file);

          var uploadId = this.id;

          reader.onload = function (event) {
            var csvData = event.target.result;
            data = $.csv.toArrays(csvData);                     
                      
            if(uploadId === 'txtFileUploadLifeExpectancy'){             
              // We clear the table from previous data
              if (tableLifeExpectancy != null) {
                tableLifeExpectancy.destroy();
                $('#CSVtableLifeExpectancy').empty();              
              }
                                        
              if(checkCSVHeader(data) == false){
                console.log("Dataset must have five columns and have the header of 'Indicator,Metric,Location,Score,Total Score'");
              }        

              tableLifeExpectancy = populateTable(data, $('#CSVtableLifeExpectancy'));                         
            }

            if(uploadId === 'txtFileUploadHealth'){
              if (tableHealth != null) {
                tableHealth.destroy();
                $('#CSVtableHealth').empty();              
              }
              
              if(checkCSVHeader(data) == false){
                console.log("Dataset must have five columns and have the header of 'Indicator,Metric,Location,Score,Total Score'");
              } 
              
              tableHealth = populateTable(data,$('#CSVtableHealth'));
            }

            if(uploadId === 'txtFileUploadEducation'){
              if (tableEducation != null) {
                tableEducation.destroy();
                $('#CSVtableEducation').empty();              
              }

              if(checkCSVHeader(data) == false){
                console.log("Dataset must have five columns and have the header of 'Indicator,Metric,Location,Score,Total Score'");
              } 

              tableEducation = populateTable(data,$('#CSVtableEducation'));
            }

            if(uploadId === 'txtFileUploadSafety'){
              if (tableSafety != null) {
                tableSafety.destroy();
                $('#CSVtableSafety').empty();              
              }

              if(checkCSVHeader(data) == false){
                console.log("Dataset must have five columns and have the header of 'Indicator,Metric,Location,Score,Total Score'");
              } 

              tableSafety = populateTable(data,$('#CSVtableSafety'));
            }

          };
          reader.onerror = function () {
            alert('Unable to read ' + file.fileName);
          };
        }
      }

      $("#generateReport").click(async function () {

        // This fucntionality should be implemented using a Unit Testing framework
        //updateChart(chart, "Life Exprectancy", 1000000, 3000000);

        //Get the rest of the HTML elemensts here (name, scope, GWP etc.)

        // Get the canvas from the HTML
        var canvas = document.querySelector('#myChart');
        //creates image
        var canvasImg = canvas.toDataURL("image/png", 1.0);

        // We add all the info into one list in order to put them into the pdf   
        var list = [];
        // Add the info
        list.push($("#infoHeader").text());
        list.push($("#projectName").val());
        list.push($("#name").val());
        list.push($("#email").val());

        // Add the description
        list.push($("#scopeHeader").text());

        list.push($("textarea#phase1Text").val());
        
        // list.push($("#phase2Header").text());

        // TODO:This should be wrapped in an if()
        let LifeExpectancyTablePromise = new Promise ((resolve,reject) => { 
          window.scrollTo(0, 0);
          html2canvas($('#csv-displayLifeExpectancy')[0]).then(function (canvas) {
                var LifeExpectancyTableImg = canvas.toDataURL("image/png", 1.0);            
                resolve(LifeExpectancyTableImg);                   
              });                
        });


        // Add the selected equation
        list.push($("#methodHeader").text());
        // list.push($("label[for='"+selectedMethodId+"']").val());

        var equation_image = null;
        // Add the result
        if ($('input[id=socialMethod]:checked')) {
          // list.push($("label[for='socialMethod']").text());                          

          equation_image = document.querySelector('#indicator_image').getAttribute("src");                                      
        }

        list.push("Results:");

        list.push($("#Result1").text());
        list.push($("#Result2").text());

        list.push($("#phase4Header").text());

        // Remove the 'screenshot' of CSV table for now, there will be problem if we have table the spans in more than one 'table pages'
        // var LifeExpectancyTablePromiseResult = await LifeExpectancyTablePromise;
        // console.log("++++"+LifeExpectancyTablePromiseResult);        
        // createPDF(canvasImg, LifeExpectancyTablePromiseResult, list);

        createPDF(canvasImg, null, equation_image, list);
      });
    });



    function populateTable(dataSet, tableElement) {
      if (typeof (dataSet[0]) === 'undefined') {
        return null;
      }
      else {
        var columns = [];
        var data = [];
        $.each(dataSet, function (index, row) {

          // The first row of the csv data is going to be represent each column in our HTML table
          if (index == 0) {
            $.each(row, function (index, colData) {
              columns.push({ title: colData });
            });
          } // Then we just have the rest of the data
          else {
            data.push(row);
          }

        });


        // We assign the above data and columns and some attributes to display on the table.
        return tableElement.DataTable({
          data: data,
          columns: columns,
          select: {
            style: 'single',
            items: 'row'
          },
          // dom: 'Bfrtip',
          // buttons: [
          //     {
          //         text: 'Get selected data',
          //         action: function () {
          //             // var count = table.rows( { selected: true } ).count();

          //             // events.prepend( '<div>'+count+' row(s) selected</div>' );
          //             // console.log(table.rows({seleted: true}).data()[0]);
          //             var data  = table.rows({seleted: true}).data()[0];

          //             var result = data[0]*data[1]+data[2]*data[3];
          //             console.log(data);

          //             results.append($( "<i>"+result+"</i>"));
          //         }
          //     }
          // ]        
        });
      }


    }

  </script>

  <!-- The library for the charts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>

  <!--LCA Tool ends-->